# Claude Menu - AI-Powered Restaurant Menu Designer

## Overview
Claude Menu is a SaaS application that transforms restaurant menus into stunning, professional designs using AI. Users upload their menu in PDF or Word format, customize colors and style preferences, and receive 3 unique HTML menu designs generated by Claude AI.

## Current State
**Status**: MVP Complete and Functional

The application is fully implemented with:
- User authentication via Replit Auth (supports Google, GitHub, email/password)
- Stripe subscription management ($29/month Pro plan)
- File upload and text extraction (PDF and DOCX)
- AI-powered menu generation using Claude 3.5 Sonnet
- 3 unique HTML design variations per generation
- Design selection and HTML download functionality
- Full user dashboard with generation history

## Recent Changes (November 23, 2024)
- Implemented complete frontend with landing page, dashboard, generator, results, and subscription pages
- Built backend API with Replit Auth, Stripe integration, and Claude AI
- Set up PostgreSQL database with Drizzle ORM
- Fixed routing using Redirect components to properly separate authenticated/unauthenticated routes
- Fixed session cookies to work in development (secure=false in dev, sameSite=lax)
- Added Stripe webhook handling with rawBody support for subscription status updates
- Implemented file upload with PDF/DOCX text extraction
- Changed AI generation to synchronous flow for immediate design availability
- Created AI generation pipeline for 3 menu design variations

## Project Architecture

### Frontend (`client/`)
- **Framework**: React with Wouter for routing
- **UI Library**: Shadcn/UI components with Tailwind CSS
- **State Management**: TanStack Query for server state
- **Pages**:
  - `/` - Landing page (public) or Dashboard (authenticated)
  - `/generate` - Menu generator with file upload and customization
  - `/result/:id` - View and download generated designs
  - `/subscribe` - Stripe subscription checkout

### Backend (`server/`)
- **Framework**: Express.js
- **Database**: PostgreSQL with Drizzle ORM
- **Authentication**: Replit Auth (OpenID Connect)
- **Payment**: Stripe subscriptions
- **AI**: Anthropic Claude 3.5 Sonnet
- **File Processing**: pdf-parse and mammoth for text extraction

### Database Schema
- `users` - User accounts with Stripe customer/subscription info
- `menuGenerations` - Menu generation records with extracted text and AI-generated designs
- `sessions` - Session storage for authentication

## API Routes
- `GET /api/auth/user` - Get authenticated user
- `POST /api/login` - Initiate login flow
- `POST /api/logout` - Logout user
- `GET /api/subscription/status` - Check subscription status
- `POST /api/create-subscription` - Create Stripe subscription
- `POST /api/webhook/stripe` - Handle Stripe webhooks
- `POST /api/upload` - Upload and extract text from menu file
- `POST /api/generate` - Generate 3 AI menu designs
- `GET /api/generations` - Get user's generations
- `GET /api/generations/:id` - Get specific generation
- `POST /api/generations/:id/select` - Select a design variation
- `GET /api/generations/:id/download/:variation` - Download HTML

## User Preferences
- Design System: Vercel-style minimalist aesthetic with clean typography
- Color Scheme: Primary blue (#3b82f6), with automatic dark mode support
- Typography: Inter font family throughout

## Development
- **Start Dev Server**: Workflow "Start application" runs `npm run dev`
- **Database Migrations**: `npm run db:push`
- **Type Checking**: `npm run check`

## Environment Variables
Required secrets (already configured):
- `DATABASE_URL` - PostgreSQL connection string
- `SESSION_SECRET` - Session encryption key
- `ANTHROPIC_API_KEY` - Claude AI API key
- `STRIPE_SECRET_KEY` - Stripe secret key
- `VITE_STRIPE_PUBLIC_KEY` - Stripe publishable key

## Key Features
1. **Authentication**: Seamless login with Replit Auth supporting multiple providers
2. **Subscription Gating**: Users must subscribe to generate menus
3. **File Upload**: Drag-and-drop interface for PDF and DOCX files
4. **Text Extraction**: Automatic extraction of menu content
5. **AI Generation**: Claude generates 3 unique professional HTML designs
6. **Customization**: Color palette picker, size selection, style prompts
7. **Download**: Export selected designs as standalone HTML files
8. **Dashboard**: View generation history and subscription status

## Technical Decisions
- **Replit Auth over Google OAuth**: Provides multi-provider support with easier setup
- **PostgreSQL**: Required for session storage and data persistence
- **Stripe Subscriptions**: Recurring billing for SaaS model
- **Claude API**: Generates creative, high-quality HTML designs
- **Standalone HTML**: No dependencies, ready to print or publish
- **Background Processing**: AI generation runs asynchronously for better UX

## Next Phase Features (Not Yet Implemented)
- PDF export using Puppeteer
- Stripe customer portal for subscription management
- Menu generation history with thumbnails
- Design templates and presets
- Real-time design editing
- Team collaboration features
